---

- name: generate packages list
  set_fact:
    _system_install_packages: '{{
    (system_install_packages + system_install_extra_packages | default([]))
    | json_query("[?state!=''absent''
    && (
    !contains(keys(@),''os'')
    || contains(os, ''" + system_install_vendor + "'')
    )
    ].pkg") | list
    }}'

- include: bootstrap-centos.yml
  when: system_install_vendor in ['centos']

- include: bootstrap-opensuse.yml
  when: system_install_vendor in ['opensuse']
    
- include: bootstrap-debian.yml
  when: system_install_vendor in [ 'debian', 'ubuntu' ]

- include: bootstrap-alpine.yml
  when: system_install_vendor == 'alpine'
